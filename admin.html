<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ›¡ï¸ Admin VLACK</title>
  <link rel="stylesheet" href="admin.css">
</head>

<body>

<!-- ğŸ” LOGIN -->
<div class="login-container" id="loginBox">
  <h2>ğŸ” INGRESAR ADMIN</h2>
  <input type="email" id="user" placeholder="ğŸ“§ Usuario (email)">
  <input type="password" id="pass" placeholder="ğŸ”‘ ContraseÃ±a">
  <button onclick="login()">âœ“ Ingresar</button>
</div>

<!-- ğŸ§­ PANEL CENTRAL -->
<div id="adminPanel" style="display:none; padding:20px; text-align:center;">

  <h1>âš™ï¸ Panel de AdministraciÃ³n</h1>
  <p id="adminStatus">No autenticado</p>

  <div style="display:flex; flex-direction:column; gap:15px; max-width:300px; margin:30px auto;">
    
    <button onclick="location.href='productos.html'">
      ğŸ¹ Administrar Productos
    </button>

    <button onclick="location.href='pedidos.html'">
      ğŸ“¦ Pedidos en Vivo
    </button>

    <button onclick="location.href='reportes.html'">
      ğŸ“Š Reportes
    </button>

    <button onclick="logout()" style="background:#a00; color:white;">
      ğŸšª Cerrar SesiÃ³n
    </button>

  </div>
</div>

<!-- ğŸ”¥ SCRIPTS -->
<script type="module" src="firebase.js"></script>

<script type="module">
  import { auth } from "./firebase.js";
  import {
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-auth.js";

  // LOGIN
  window.login = function () {
    const email = document.getElementById("user").value;
    const pass = document.getElementById("pass").value;

    signInWithEmailAndPassword(auth, email, pass)
      .catch(() => alert("Usuario o contraseÃ±a incorrectos"));
  };

  // LOGOUT
  window.logout = function () {
    signOut(auth);
  };

  // AUTH STATE
  onAuthStateChanged(auth, (user) => {
    const loginBox = document.getElementById("loginBox");
    const panel = document.getElementById("adminPanel");
    const status = document.getElementById("adminStatus");

    if (user) {
      loginBox.style.display = "none";
      panel.style.display = "block";
      status.textContent = `Logueado como: ${user.email}`;
    } else {
      loginBox.style.display = "block";
      panel.style.display = "none";
      status.textContent = "No autenticado";
    }
  });
</script>

</body>
</html>